<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finan√ßa Animal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
 margin:0;
 font-family:Arial;
 background:url('https://images.unsplash.com/photo-1517849845537-4d257902454a') center/cover fixed;
}

header{
 text-align:center;
 color:white;
 padding:15px;
 font-size:24px;
 font-weight:bold;
 background:rgba(0,0,0,0.6);
}

.container{
 display:flex;
 gap:20px;
 padding:20px;
 max-width:1100px;
 margin:auto;
}

.box{
 background:white;
 padding:15px;
 border-radius:12px;
 flex:1;
 box-shadow:0 10px 25px rgba(0,0,0,0.15);
}

input, textarea{
 width:100%;
 padding:8px;
 margin:5px 0;
 border-radius:6px;
 border:1px solid #ccc;
}

button{
 background:#a66a2c;
 color:white;
 border:none;
 padding:8px 12px;
 border-radius:6px;
 cursor:pointer;
}

.dica-card{
 background:#3b2a22;
 color:white;
 padding:15px;
 border-radius:10px;
 text-align:center;
 margin-top:10px;
}

.galeria{
 display:grid;
 grid-template-columns:repeat(2,1fr);
 gap:10px;
}

.foto-card{
 background:white;
 padding:8px;
 border-radius:10px;
 box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

.foto-card img{width:100%; border-radius:8px;}
.curtir{color:red; cursor:pointer; font-weight:bold;}

.mural{
 margin:20px auto;
 background:white;
 padding:15px;
 border-radius:12px;
 max-width:900px;
 box-shadow:0 10px 25px rgba(0,0,0,0.15);
}

.post{
 border:1px solid #ddd;
 padding:10px;
 margin-top:10px;
 border-radius:10px;
}

.post img{width:100%; border-radius:10px;}

@media(max-width:900px){
 .container{flex-direction:column;}
}
</style>
</head>
<body>

<header>FINAN√áA ANIMAL</header>

<div style="text-align:center;color:white;margin:10px;">
üë§ Seu nome: <input id="usuarioNome" placeholder="Digite seu nome">
<button onclick="salvarUsuario()">Salvar</button>
<span id="userAtual"></span>
</div>

<div class="container">

<!-- PLANEJAMENTO -->
<div class="box">
<h3>üí∞ Planejamento</h3>
<input type="number" id="alimentacao" placeholder="Alimenta√ß√£o">
<input type="number" id="saude" placeholder="Sa√∫de">
<input type="number" id="mimos" placeholder="Mimos">
<button onclick="calcular()">Analisar Gastos</button>
<canvas id="grafico"></canvas>
<p><b>Emerg√™ncia:</b> R$ <span id="emergencia">0</span></p>
</div>

<!-- DICAS -->
<div class="box">
<h3>üí° Dicas <button onclick="novaDica()">Atualizar</button></h3>
<div class="dica-card" id="dica"></div>
</div>

<!-- GALERIA -->
<div class="box">
<h3>üì∏ Momento Fofura</h3>
<div class="galeria" id="galeria"></div>
</div>

</div>

<!-- MURAL -->
<div class="mural">
<h3>üìù Hist√≥ria do seu Pet</h3>
<input id="nomePet" placeholder="Nome do Pet">
<textarea id="historia" placeholder="Hist√≥ria"></textarea>
<input type="file" id="fotoPet">
<button onclick="postar()">Registrar</button>
<div id="posts"></div>
</div>

<script>
/* PERFIL */
let usuario=localStorage.getItem("usuario")||"";
function salvarUsuario(){
 usuario=usuarioNome.value;
 localStorage.setItem("usuario",usuario);
 userAtual.innerText="Logado como: "+usuario;
}
if(usuario) userAtual.innerText="Logado como: "+usuario;

/* CALCULADORA */
let grafico;
function calcular(){
 let a=+alimentacao.value||0;
 let s=+saude.value||0;
 let m=+mimos.value||0;
 let emergencia=(a+s+m)*0.2;
 emergenciaEl.innerText=emergencia.toFixed(2);

 let ctx=document.getElementById("grafico");
 if(grafico)grafico.destroy();
 grafico=new Chart(ctx,{
  type:'pie',
  data:{labels:['Alimenta√ß√£o','Sa√∫de','Mimos'],
  datasets:[{data:[a,s,m]}]}
 });
}
const emergenciaEl=document.getElementById("emergencia");

/* DICAS */
const dicas=["Vacinas evitam gastos","Guarde 20%","Ra√ß√£o boa ajuda","Passeios evitam estresse"];
function novaDica(){dica.innerText=dicas[Math.floor(Math.random()*dicas.length)];}
novaDica();

/* GALERIA */
const imagens=[
'https://images.unsplash.com/photo-1518717758536-85ae29035b6d',
'https://images.unsplash.com/photo-1558788353-f76d92427f16'
];
function carregarGaleria(){
 galeria.innerHTML="";
 imagens.forEach((src,i)=>{
  let curtidas=localStorage.getItem("like"+i)||0;
  galeria.innerHTML+=`
  <div class="foto-card">
   <img src="${src}">
   <p><span class="curtir" onclick="curtir(${i})">‚ù§Ô∏è</span> ${curtidas}</p>
   <input placeholder="Comentar..." onblur="salvarComentario(this)">
  </div>`;
 });
}
function curtir(i){
 let c=+localStorage.getItem("like"+i)||0;
 localStorage.setItem("like"+i,c+1);
 carregarGaleria();
}

/* FILTRO OFENSIVO */
const proibidas=["idiota","burro","lixo","√≥dio"];
function salvarComentario(input){
 let texto=input.value.toLowerCase();
 if(proibidas.some(p=>texto.includes(p))){
  alert("Coment√°rio bloqueado por linguagem inadequada");
  input.value="";
 }
}

carregarGaleria();

/* MURAL */
let postsData=JSON.parse(localStorage.getItem("posts")||"[]");

function postar(){
 if(!usuario) return alert("Coloque seu nome primeiro!");
 let nome=nomePet.value;
 let hist=historia.value;
 let file=fotoPet.files[0];
 if(!nome||!hist||!file)return alert("Preencha tudo");

 let reader=new FileReader();
 reader.onload=function(){
  postsData.push({usuario,nome,hist,img:reader.result});
  localStorage.setItem("posts",JSON.stringify(postsData));
  mostrarPosts();
 }
 reader.readAsDataURL(file);
}

function mostrarPosts(){
 posts.innerHTML="";
 postsData.forEach((p,i)=>{
  posts.innerHTML+=`
  <div class="post">
   <b>${p.usuario}</b> - ${p.nome}
   <img src="${p.img}">
   <p>${p.hist}</p>
   ${p.usuario===usuario?`<button onclick="excluir(${i})">Excluir</button>`:""}
  </div>`;
 });
}

function excluir(i){
 postsData.splice(i,1);
 localStorage.setItem("posts",JSON.stringify(postsData));
 mostrarPosts();
}
mostrarPosts();
</script>

</body>
</html>
