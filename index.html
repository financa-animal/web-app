<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>FofoPet - Comunidade e Gest√£o</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root { --primary: #5FA8A0; --secondary: #e67e22; --soft: #F4F8F7; --card: rgba(255, 255, 255, 0.98); --text: #2b2b2b; }
body { margin: 0; font-family: 'Segoe UI', sans-serif; background: linear-gradient(rgba(255,255,255,0.4), rgba(255,255,255,0.4)), url("https://images.unsplash.com/photo-1516733725897-1aa73b87c8e8?q=80&w=2070&auto=format&fit=crop") center/cover no-repeat fixed; color: var(--text); }
.container { max-width: 700px; margin: auto; padding: 20px 20px 120px 20px; }
header { text-align: center; padding: 30px 0; font-size: 35px; font-weight: 800; color: var(--primary); }
.card { background: var(--card); padding: 25px; border-radius: 20px; box-shadow: 0 8px 30px rgba(0,0,0,0.06); margin-bottom: 25px; }

/* JOGO CA√áA-PALAVRAS MELHORADO */
.word-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 2px; margin: 15px auto; max-width: 350px; background: #ddd; border: 2px solid #ddd; }
.cell { width: 100%; aspect-ratio: 1; background: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; user-select: none; font-size: 14px; transition: 0.2s; }
.cell:hover { background: #f0f0f0; }
.cell.selected { background: var(--secondary); color: white; }
.cell.found { background: var(--primary) !important; color: white !important; }
.word-list { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 10px; font-size: 13px; font-weight: bold; }
.word-item.done { text-decoration: line-through; color: #bbb; }

/* CALCULADORA E OUTROS */
.tool-box { background: var(--soft); padding: 20px; border-radius: 15px; text-align: center; border: 2px dashed var(--primary); }
input, textarea { width: 100%; padding: 12px; margin: 8px 0; border-radius: 12px; border: 1.5px solid #eee; box-sizing: border-box; }
button { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; width: 100%; }
.chat { position: fixed; right: 25px; bottom: 85px; width: 320px; height: 450px; background: white; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); display: flex; flex-direction: column; z-index: 1000; }
.minimized { height: 50px !important; width: 200px; overflow: hidden; }
footer { text-align: center; padding: 20px; background: rgba(255,255,255,0.9); margin-top: 40px; font-size: 12px; }
</style>
</head>
<body>

<header>üêæ FofoPet</header>

<div class="container">
    
    <div class="card">
        <h3>üéÆ Ca√ßa-Palavras Pet Infinito</h3>
        <p style="font-size: 13px; color: #666; text-align: center;">Clique nas letras para formar as palavras!</p>
        <div class="word-list" id="wordList"></div>
        <div class="word-grid" id="grid"></div>
        <button onclick="initGame()" style="margin-top:15px; background:#888;">Gerar Novo Tabuleiro</button>
    </div>

    <div class="card">
        <h3>üíß Calculadora de Hidrata√ß√£o</h3>
        <div class="tool-box">
            <input type="number" id="pesoPet" placeholder="Peso do pet (kg)"/>
            <button onclick="calcularAgua()" style="background: var(--secondary);">Calcular ml/dia</button>
            <div id="resultadoAgua" style="margin-top:10px; font-weight:bold; color:var(--primary); display:none;"></div>
        </div>
    </div>

    <div class="card">
        <h3>üìñ Mural de Hist√≥rias</h3>
        <input id="histName" placeholder="Nome do Pet"/><textarea id="histText" rows="2" placeholder="Conte algo fofo..."></textarea>
        <button onclick="salvarHistoria()">Publicar</button>
        <div id="mural" style="margin-top:15px; max-height: 150px; overflow-y: auto;"></div>
    </div>

    <div class="card">
        <h3>üí∞ Controle Financeiro</h3>
        <input type="number" id="vRacao" placeholder="Ra√ß√£o (R$)"/><input type="number" id="vVet" placeholder="Vet (R$)"/>
        <button onclick="calcularFinancas()">Ver Gr√°fico</button>
        <div style="max-width:160px; margin:auto;"><canvas id="graficoPet"></canvas></div>
    </div>

    <div class="card">
        <h3>üì© Contato</h3>
        <input id="emailContato" placeholder="Seu e-mail"/><textarea id="msgContato" placeholder="Mensagem"></textarea>
        <button onclick="enviarContato()" style="background: var(--secondary);">Enviar</button>
    </div>
</div>

<div class="chat minimized" id="chatWindow">
    <div style="background:var(--primary);color:white;padding:15px;cursor:pointer" onclick="toggleChat()">üí¨ Chat Comunit√°rio</div>
    <div id="chatContent" style="flex:1;padding:10px;overflow-y:auto; font-size: 14px;"></div>
    <div style="padding:10px;border-top:1px solid #eee;display:flex">
        <input id="chatInput" placeholder="Mensagem..." style="margin:0"/>
        <button onclick="enviarChat()" style="width:40px;margin-left:5px">‚úà</button>
    </div>
</div>

<footer>
    <p>¬© 2026 FofoPet - <a href="#">Privacidade</a> | <a href="#">Termos</a></p>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = { apiKey: "SUA_API", authDomain: "SEU_DOMINIO", projectId: "SEU_ID" };
const app = initializeApp(firebaseConfig); const db = getFirestore(app);

// --- NOVAL√ìGICA DO CA√áA-PALAVRAS DIN√ÇMICO ---
const bancoDePalavras = ["GATO", "CAO", "PEIXE", "AMOR", "OSSO", "MIAU", "AUAU", "PATA", "BOLA", "AGUA", "VET", "FOFO"];
let palavrasAtuais = [];
const size = 10;

window.initGame = () => {
    const grid = document.getElementById('grid'); grid.innerHTML = '';
    const listCont = document.getElementById('wordList'); listCont.innerHTML = '';
    palavrasAtuais = [...bancoDePalavras].sort(() => 0.5 - Math.random()).slice(0, 4);
    
    // Criar Grid Vazio
    let matrix = Array(size).fill().map(() => Array(size).fill(''));

    // Inserir Palavras
    palavrasAtuais.forEach((word) => {
        let row = Math.floor(Math.random() * size);
        let col = Math.floor(Math.random() * (size - word.length));
        for(let i=0; i<word.length; i++) matrix[row][col+i] = word[i];
        listCont.innerHTML += `<span class="word-item" id="w-${word}">${word}</span> `;
    });

    // Preencher com letras aleat√≥rias
    for(let r=0; r<size; r++) {
        for(let c=0; c<size; c++) {
            if(matrix[r][c] === '') matrix[r][c] = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*26)];
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.innerText = matrix[r][c];
            cell.onclick = () => {
                cell.classList.toggle('selected');
                verificarPalavras();
            };
            grid.appendChild(cell);
        }
    }
};

function verificarPalavras() {
    const selecionadas = Array.from(document.querySelectorAll('.cell.selected'));
    const str = selecionadas.map(c => c.innerText).join('');
    
    palavrasAtuais.forEach(p => {
        if(str.includes(p)) {
            selecionadas.forEach(c => {
                if(p.includes(c.innerText)) {
                    c.classList.remove('selected');
                    c.classList.add('found');
                }
            });
            const item = document.getElementById('w-'+p);
            if(item) item.classList.add('done');
        }
    });
}

// --- INICIALIZA√á√ÉO E OUTRAS FUN√á√ïES ---
initGame();
window.calcularAgua = () => { 
    const p = document.getElementById('pesoPet').value; 
    const r = document.getElementById('resultadoAgua'); 
    r.innerHTML = `üíß Seu pet deve beber ${p*60}ml por dia.`; 
    r.style.display="block"; 
};
window.toggleChat = () => document.getElementById('chatWindow').classList.toggle('minimized');
window.calcularFinancas = () => {
    if(window.myChart) window.myChart.destroy();
    window.myChart = new Chart(document.getElementById('graficoPet'), { 
        type:'doughnut', 
        data:{ labels:['Gasto','Meta'], datasets:[{data:[document.getElementById('vRacao').value || 10, 100], backgroundColor:['#5FA8A0','#eee']}] }
    });
};
window.calcularFinancas();
</script>
</body>
</html>
