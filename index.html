<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>游 Finan칞a Animal</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Firebase vers칚o compat (funciona f치cil em HTML 칰nico) -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:url("https://images.unsplash.com/photo-1518717758536-85ae29035b6d") no-repeat center/cover fixed;
}
header{
  background:#4b2e1e;
  color:#fff;
  padding:15px;
  text-align:center;
  font-size:22px;
}
.card{
  background:#fff;
  margin:15px auto;
  padding:15px;
  border-radius:12px;
  width:95%;
  max-width:500px;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
input,button{
  width:100%;
  padding:8px;
  margin:5px 0;
  border-radius:6px;
  border:1px solid #ccc;
}
button{
  background:#5a3d2b;
  color:white;
  cursor:pointer;
}
.post{
  background:white;
  padding:10px;
  border-radius:10px;
  margin-bottom:10px;
}
.dicas{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.dica{
  background:#5a3d2b;
  color:white;
  padding:15px;
  border-radius:10px;
  text-align:center;
  transform-style:preserve-3d;
  transition:0.6s;
}
.dica:hover{ transform:rotateY(180deg); }
</style>
</head>

<body>

<header>游 Finan칞a Animal</header>

<div class="card">
  <h3>游녻 Login / Cadastro</h3>
  <input id="email" placeholder="Email">
  <input id="senha" type="password" placeholder="Senha">
  <button onclick="login()">Entrar</button>
  <button onclick="cadastro()">Criar Conta</button>
</div>

<div class="card">
  <h3>游닞 Postar Foto ou V칤deo</h3>
  <input id="petNome" placeholder="Nome do Pet">
  <input type="file" id="arquivo">
  <button onclick="postar()">Postar</button>
</div>

<div class="card">
  <h3>游눯 Gastos do Pet</h3>
  <input type="number" id="alimentacao" placeholder="Alimenta칞칚o">
  <input type="number" id="saude" placeholder="Sa칰de">
  <input type="number" id="mimos" placeholder="Mimos">
  <button onclick="grafico()">Analisar</button>
  <canvas id="chart"></canvas>
</div>

<div class="card">
  <h3>游 Dicas</h3>
  <div class="dicas">
    <div class="dica">游눌 Vacinas evitam gastos grandes</div>
    <div class="dica">游볼 Ra칞칚o boa = menos veterin치rio</div>
    <div class="dica">游붱 Escovar dentes evita cirurgia</div>
    <div class="dica">游뛌 Passeio mant칠m sa칰de</div>
  </div>
</div>

<div class="card">
  <h3>游 Momento Fofura</h3>
  <div id="feed"></div>
</div>

<script>
// 游댠 COLOQUE SUAS CHAVES DO FIREBASE AQUI
const firebaseConfig = {
  apiKey: "SUA_KEY",
  authDomain: "SEU_DOMINIO",
  projectId: "SEU_ID",
  storageBucket: "SEU_BUCKET",
  messagingSenderId: "ID",
  appId: "APP_ID"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

function cadastro(){
  auth.createUserWithEmailAndPassword(email.value, senha.value);
}

function login(){
  auth.signInWithEmailAndPassword(email.value, senha.value);
}

function postar(){
  let file = arquivo.files[0];
  let ref = storage.ref("posts/" + Date.now());
  ref.put(file).then(()=>{
    ref.getDownloadURL().then(url=>{
      db.collection("posts").add({
        pet: petNome.value,
        url:url,
        likes:0
      });
    });
  });
}

db.collection("posts").onSnapshot(snap=>{
  feed.innerHTML="";
  snap.forEach(doc=>{
    let p=doc.data();
    feed.innerHTML+=`
      <div class="post">
        <h4>${p.pet}</h4>
        <img src="${p.url}" width="100%">
        <button onclick="curtir('${doc.id}')">仇벒잺 ${p.likes}</button>
      </div>`;
  });
});

function curtir(id){
  db.collection("posts").doc(id).update({
    likes: firebase.firestore.FieldValue.increment(1)
  });
}

function grafico(){
  new Chart(chart,{
    type:'doughnut',
    data:{
      labels:['Alimenta칞칚o','Sa칰de','Mimos'],
      datasets:[{data:[alimentacao.value,saude.value,mimos.value]}]
    }
  });
}
</script>

</body>
</html>
