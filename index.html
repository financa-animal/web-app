<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ¾ FinanÃ§a Animal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
 margin:0;
 font-family:Arial, sans-serif;
 background:url("https://images.unsplash.com/photo-1518717758536-85ae29035b6d") center/cover fixed;
}
header{background:#4b2e1e;color:white;text-align:center;padding:15px;font-size:22px;}
.card{background:white;margin:15px auto;padding:15px;border-radius:12px;width:95%;max-width:520px;box-shadow:0 4px 12px rgba(0,0,0,0.2);}
input,textarea,button{width:100%;padding:8px;margin:6px 0;border-radius:6px;border:1px solid #ccc;}
button{background:#5a3d2b;color:white;cursor:pointer}

/* DICAS */
.dicas{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.flip{perspective:1000px;}
.flip-inner{position:relative;width:100%;height:100px;transition:transform .6s;transform-style:preserve-3d;}
.flip.active .flip-inner{transform:rotateY(180deg);}
.frente,.verso{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:10px;display:flex;justify-content:center;align-items:center;padding:10px;font-weight:bold;text-align:center;}
.frente{background:#5a3d2b;color:white;}
.verso{background:#f1c40f;transform:rotateY(180deg);}

/* POSTS */
.post{background:#fff;padding:8px;border-radius:10px;margin-bottom:10px}
.post img{width:100%;border-radius:8px}
.actions{display:flex;gap:5px;margin-top:5px}
.like{color:red;cursor:pointer}
.alerta{font-weight:bold;margin-top:10px}
</style>
</head>

<body>

<header>ğŸ¾ FinanÃ§a Animal</header>

<!-- CALCULADORA -->
<div class="card">
<h3>ğŸ’° Planejamento do Pet</h3>
<input type="number" id="a" placeholder="AlimentaÃ§Ã£o">
<input type="number" id="s" placeholder="SaÃºde">
<input type="number" id="m" placeholder="Mimos">
<button onclick="calc()">Analisar Gastos</button>
<canvas id="graf"></canvas>
<div id="msg" class="alerta"></div>
</div>

<!-- DICAS -->
<div class="card">
<h3>ğŸ§  Dicas</h3>
<div class="dicas" id="dicas"></div>
</div>

<!-- POSTAR -->
<div class="card">
<h3>ğŸ“– HistÃ³ria do seu Pet</h3>
<input id="nomePet" placeholder="Nome do Pet">
<textarea id="historia" placeholder="Conte a histÃ³ria"></textarea>
<input type="file" id="foto">
<button onclick="salvarPost()">Publicar</button>
</div>

<!-- FEED -->
<div class="card">
<h3>ğŸ“¸ Momento Fofura</h3>
<div id="feed"></div>
</div>

<script>
/* CALCULADORA */
let chart;
function calc(){
 let a=+a.value||0, s=+s.value||0, m=+m.value||0;
 let total=a+s+m;
 if(chart) chart.destroy();
 chart=new Chart(graf,{type:'doughnut',
 data:{labels:['AlimentaÃ§Ã£o','SaÃºde','Mimos'],
 datasets:[{data:[a,s,m]}]}});

 let msg="";
 if(total>800) msg="ğŸš¨ Alerta! Gastos muito altos.";
 else if(m>a) msg="âš ï¸ Muitos mimos.";
 else if(s>a) msg="âš ï¸ SaÃºde pesando no orÃ§amento.";
 else msg="âœ… Gastos equilibrados!";
 document.getElementById("msg").innerText=msg;
}

/* DICAS */
const lista=[
"Vacinas evitam gastos grandes",
"RaÃ§Ã£o boa reduz veterinÃ¡rio",
"Escovar dentes evita cirurgia",
"Passeio mantÃ©m saÃºde"
];
function gerarDicas(){
 dicas.innerHTML="";
 lista.forEach(t=>{
 dicas.innerHTML+=`
 <div class="flip" onclick="this.classList.toggle('active')">
  <div class="flip-inner">
   <div class="frente">ğŸ¾ Dica</div>
   <div class="verso">${t}</div>
  </div>
 </div>`;
 });
}
gerarDicas();

/* POSTS */
let posts=JSON.parse(localStorage.getItem("posts"))||[];

function salvarPost(editIndex=null){
 let file=foto.files[0];
 let reader=new FileReader();
 reader.onload=e=>{
  let post={
   nome:nomePet.value,
   texto:historia.value,
   img:e.target.result,
   likes:0
  };
  if(editIndex!==null) posts[editIndex]=post;
  else posts.push(post);
  localStorage.setItem("posts",JSON.stringify(posts));
  renderPosts();
 };
 if(file) reader.readAsDataURL(file);
}

function renderPosts(){
 feed.innerHTML="";
 posts.forEach((p,i)=>{
  feed.innerHTML+=`
  <div class="post">
   <h4>${p.nome}</h4>
   <p>${p.texto}</p>
   <img src="${p.img}">
   <div class="actions">
    <span class="like" onclick="curtir(${i})">â¤ï¸ ${p.likes}</span>
    <button onclick="editar(${i})">âœï¸</button>
    <button onclick="excluir(${i})">ğŸ—‘</button>
   </div>
  </div>`;
 });
}
renderPosts();

function curtir(i){
 posts[i].likes++;
 localStorage.setItem("posts",JSON.stringify(posts));
 renderPosts();
}

function excluir(i){
 if(confirm("Excluir post?")){
  posts.splice(i,1);
  localStorage.setItem("posts",JSON.stringify(posts));
  renderPosts();
 }
}

function editar(i){
 nomePet.value=posts[i].nome;
 historia.value=posts[i].texto;
 foto.required=false;
 salvarPost=i;
}
</script>

</body>
</html>
