<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Finan√ßa Animal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{
 font-family: Arial, sans-serif;
 margin:0;
 background:url('https://images.unsplash.com/photo-1548199973-03cce0bbc87b') center/cover fixed;
}

.topo{
 text-align:center;
 color:white;
 padding:20px;
 font-size:28px;
 font-weight:bold;
 background:rgba(0,0,0,0.6);
}

.container{
 display:flex;
 gap:20px;
 padding:20px;
}

.box{
 background:white;
 padding:15px;
 border-radius:10px;
 flex:1;
 box-shadow:0 0 10px rgba(0,0,0,0.2);
}

button{
 background:#b57b38;
 color:white;
 border:none;
 padding:8px 12px;
 border-radius:6px;
 cursor:pointer;
}

input, textarea{
 width:100%;
 padding:6px;
 margin:5px 0;
}

.galeria{
 display:grid;
 grid-template-columns:repeat(2,1fr);
 gap:10px;
}

.foto-card{
 background:#fff;
 border-radius:8px;
 padding:5px;
 box-shadow:0 0 5px rgba(0,0,0,0.2);
}

.foto-card img{
 width:100%;
 height:140px;
 object-fit:cover;
 border-radius:6px;
}

.acoes{
 display:flex;
 justify-content:space-between;
 font-size:14px;
}

.mural{
 margin:20px;
 background:white;
 padding:15px;
 border-radius:10px;
}

.card-dica{
 perspective:1000px;
}

.card-inner{
 position:relative;
 width:100%;
 height:80px;
 text-align:center;
 transition: transform 0.6s;
 transform-style: preserve-3d;
}

.card-dica:hover .card-inner{
 transform: rotateY(180deg);
}

.card-front, .card-back{
 position:absolute;
 width:100%;
 height:100%;
 backface-visibility:hidden;
 background:#3b2a24;
 color:white;
 display:flex;
 align-items:center;
 justify-content:center;
 border-radius:10px;
}

.card-back{
 transform: rotateY(180deg);
 background:#5a3d33;
}
</style>
</head>
<body>

<div class="topo">FINAN√áA ANIMAL</div>

<div class="container">
<!-- Planejamento -->
<div class="box">
<h3>üí∞ Planejamento</h3>
<input id="a" type="number" placeholder="Alimenta√ß√£o">
<input id="s" type="number" placeholder="Sa√∫de">
<input id="m" type="number" placeholder="Mimos">
<button onclick="calcular()">ANALISAR GASTOS</button>
<canvas id="grafico"></canvas>
<p style="color:red">Emerg√™ncia: R$ <span id="emergencia">0</span></p>
</div>

<!-- Dicas -->
<div class="box">
<h3>üí° Dicas <button onclick="gerarDicas()">Atualizar</button></h3>
<div id="dicas"></div>
</div>

<!-- Momento Fofura -->
<div class="box">
<h3>üì∏ Momento Fofura</h3>
<div class="galeria" id="galeria"></div>
<input type="file" id="addFoto">
</div>
</div>

<!-- Hist√≥ria Pet -->
<div class="mural">
<h3>üìñ Registre a hist√≥ria do seu Pet</h3>
<input id="nomePet" placeholder="Nome do Pet">
<textarea id="historiaPet" placeholder="Como voc√™s se conheceram?"></textarea>
<input type="file" id="fotoPet">
<button onclick="salvarHistoria()">REGISTRAR NO MURAL</button>
<div id="posts"></div>
</div>

<script>
let grafico;

function calcular(){
 let a=+a.value, s=+s.value, m=+m.value;
 let total=a+s+m;
 emergencia.innerText=(total*0.2).toFixed(2);

 if(grafico) grafico.destroy();
 grafico=new Chart(graficoCanvas,{
  type:'pie',
  data:{labels:['Alimenta√ß√£o','Sa√∫de','Mimos'],
  datasets:[{data:[a,s,m]}]}
 });
}

const graficoCanvas=document.getElementById("grafico");

const listaDicas=[
["Vacinas evitam gastos altos","Preven√ß√£o √© economia"],
["Guarde 20% para emerg√™ncias","Seu pet agradece depois"],
["Passeios evitam estresse","Pet feliz = menos doen√ßas"],
["Ra√ß√£o boa evita veterin√°rio","Qualidade √© investimento"]
];

function gerarDicas(){
 dicas.innerHTML="";
 let usadas=[];
 while(usadas.length<4){
  let i=Math.floor(Math.random()*listaDicas.length);
  if(!usadas.includes(i)) usadas.push(i);
 }
 usadas.forEach(i=>{
  dicas.innerHTML+=`
  <div class="card-dica">
   <div class="card-inner">
    <div class="card-front">${listaDicas[i][0]}</div>
    <div class="card-back">${listaDicas[i][1]}</div>
   </div>
  </div>`;
 });
}
gerarDicas();

const galeria=document.getElementById("galeria");

const fotosPadrao=[
"https://images.unsplash.com/photo-1517849845537-4d257902454a",
"https://images.unsplash.com/photo-1507149833265-60c372daea22",
"https://images.unsplash.com/photo-1518717758536-85ae29035b6d",
"https://images.unsplash.com/photo-1537151608828-ea2b11777ee8"
];

fotosPadrao.forEach(f=>criarFoto(f,false));

addFoto.onchange=e=>{
 let r=new FileReader();
 r.onload=ev=>criarFoto(ev.target.result,true);
 r.readAsDataURL(e.target.files[0]);
};

function criarFoto(src,usuario){
 let div=document.createElement("div");
 div.className="foto-card";
 div.innerHTML=`
  <img src="${src}">
  <div class="acoes">
   ‚ù§Ô∏è <span>0</span>
   ${usuario?'<button class="del">üóëÔ∏è</button>':""}
  </div>
  <input placeholder="Comentar...">
 `;
 div.querySelector("span").onclick=()=>div.querySelector("span").innerText++;
 if(usuario) div.querySelector(".del").onclick=()=>div.remove();
 galeria.appendChild(div);
}

function salvarHistoria(){
 let nome=nomePet.value, hist=historiaPet.value, file=fotoPet.files[0];
 if(!nome||!hist||!file) return;
 let r=new FileReader();
 r.onload=e=>{
  let post=document.createElement("div");
  post.className="foto-card";
  post.innerHTML=`
   <img src="${e.target.result}">
   <b>${nome}</b>
   <p>${hist}</p>
   <button onclick="this.parentElement.remove()">üóëÔ∏è Excluir</button>
  `;
  posts.appendChild(post);
 };
 r.readAsDataURL(file);
}
</script>

</body>
</html>
