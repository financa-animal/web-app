<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>FofoPet</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --primary:#5FA8A0;
  --soft:#F4F8F7;
  --card:#ffffff;
  --text:#2b2b2b;
}

@media (prefers-color-scheme: dark){
  :root{
    --soft:#1e1f22;
    --card:#2a2b2f;
    --text:#eee;
  }
}

body{
  margin:0;
  font-family:'Segoe UI', sans-serif;
  background:
    linear-gradient(rgba(244,248,247,0.85), rgba(244,248,247,0.85)),
    url("https://images.unsplash.com/photo-1517849845537-4d257902454a")
    center/cover no-repeat fixed;
  color:var(--text);
}

header{
  text-align:center;
  padding:18px;
  font-size:24px;
  font-weight:600;
}

.container{
  max-width:720px;
  margin:auto;
  padding:10px;
}

.card{
  background:var(--card);
  padding:18px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  margin-bottom:22px;
  animation:fadeUp 0.5s ease;
}

@keyframes fadeUp{
  from{opacity:0; transform:translateY(20px);}
  to{opacity:1; transform:translateY(0);}
}

input, textarea{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:10px;
  border:1px solid #ddd;
}

button{
  background:var(--primary);
  border:none;
  padding:9px 14px;
  border-radius:10px;
  color:white;
  cursor:pointer;
  font-weight:600;
}

.tip-box{
  height:70px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
  background:var(--soft);
  border-radius:12px;
}

canvas{
  max-width:260px !important;
  margin:auto;
  display:block;
}

.alert{
  color:red;
  font-weight:600;
  text-align:center;
}

.chat{
  position:fixed;
  right:15px;
  bottom:15px;
  width:340px;
  height:500px;
  background:white;
  border-radius:18px;
  box-shadow:0 8px 25px rgba(0,0,0,0.15);
  display:flex;
  flex-direction:column;
}

.chat-header{
  background:var(--primary);
  color:white;
  padding:12px;
  display:flex;
  justify-content:space-between;
}

.chat-messages{
  flex:1;
  padding:12px;
  overflow-y:auto;
}

.bubble{
  padding:8px 12px;
  border-radius:14px;
  margin:6px 0;
  max-width:75%;
}

.user{background:#d1f0ff; align-self:flex-end;}
.bot{background:#eee;}

.minimized{height:45px !important;}

@media(max-width:768px){
  .chat{width:100%; right:0; bottom:0; border-radius:16px 16px 0 0;}
}
</style>
</head>

<body>

<header>üê∂ FofoPet</header>

<div class="container">

<div class="card">
<h3>üìñ Hist√≥ria do seu pet</h3>
<input id="petName" placeholder="Nome do pet"/>
<textarea id="petStory" placeholder="Conte a hist√≥ria"></textarea>
<button onclick="postStory()">Postar</button>
<div id="stories"></div>
</div>

<div class="card">
<h3>üí∞ Calculadora de Gastos</h3>
<input id="food" placeholder="Ra√ß√£o"/>
<input id="vet" placeholder="Veterin√°rio"/>
<input id="toy" placeholder="Brinquedos"/>
<button onclick="calc()">Calcular</button>
<p id="alert" class="alert"></p>
<canvas id="chart"></canvas>
</div>

<div class="card">
<h3>üí° Dicas para seu pet</h3>
<div class="tip-box" id="tips"></div>
</div>

</div>

<!-- CHAT -->
<div class="chat" id="chatBox">
<div class="chat-header">
Chat Fofo
<button onclick="toggleChat()">‚Äî</button>
</div>
<div class="chat-messages" id="chatMessages"></div>
<div style="padding:10px;">
<input id="chatInput" placeholder="Mensagem"/>
<button onclick="sendMessage()">Enviar</button>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "SUA_API",
  authDomain: "SEU_DOMINIO",
  projectId: "SEU_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.postStory = async function(){
  const name = petName.value;
  const story = petStory.value;
  await addDoc(collection(db,"stories"),{name,story});
  loadStories();
}

async function loadStories(){
  stories.innerHTML="";
  const snap = await getDocs(collection(db,"stories"));
  snap.forEach(doc=>{
    stories.innerHTML+=`<p><b>${doc.data().name}</b>: ${doc.data().story}</p>`;
  });
}
loadStories();

/* DICAS ROTATIVAS */
const tipsArr=[
"√Ågua fresca sempre üíß",
"Passeios reduzem ansiedade üêï",
"Vacinas salvam vidas üíâ",
"Brincar fortalece v√≠nculo ‚ù§Ô∏è"
];
let i=0;
setInterval(()=>{tips.innerText=tipsArr[i++%4];},3000);

/* GR√ÅFICO */
window.calc=function(){
 let f=+food.value,v=+vet.value,t=+toy.value;
 let total=f+v+t;
 if(total>500) alert.innerText="‚ö† Gasto alto!";
 new Chart(chart,{type:"doughnut",
 data:{labels:["Ra√ß√£o","Vet","Brinq"],datasets:[{data:[f,v,t]}]}
 });
}

/* CHAT */
window.sendMessage=function(){
 const msg=chatInput.value;
 chatMessages.innerHTML+=`<div class="bubble user">${msg}</div>`;
 chatInput.value="";
 setTimeout(()=>chatMessages.innerHTML+=`<div class="bubble bot">Amei falar com voc√™ üêæ</div>`,800);
}
window.toggleChat=function(){chatBox.classList.toggle("minimized")}
</script>

</body>
</html>
