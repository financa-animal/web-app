<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finan√ßa Animal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:url('https://images.unsplash.com/photo-1517849845537-4d257902454a') center/cover fixed;
}

/* HEADER */
header{
    text-align:center;
    color:white;
    padding:10px;
    font-size:24px;
    font-weight:bold;
    background:rgba(0,0,0,0.7);
}

/* USU√ÅRIO */
.user-bar{
    text-align:center;
    padding:10px;
    background:#f1c40f;
}
.user-bar input{
    padding:6px;
    border-radius:5px;
    border:none;
}
.user-bar button{
    padding:6px 10px;
    border:none;
    border-radius:5px;
    background:#6b4c2a;
    color:white;
}

/* LAYOUT */
.container{
    display:flex;
    gap:20px;
    padding:20px;
    max-width:1200px;
    margin:auto;
    align-items:flex-start;
    flex-wrap:wrap;
}

.box{
    background:white;
    border-radius:12px;
    padding:15px;
    box-shadow:0 5px 15px rgba(0,0,0,0.2);
    flex:1;
    min-width:280px;
}

/* CALCULADORA */
.box input{
    width:100%;
    padding:6px;
    margin-bottom:8px;
}
button{
    background:#6b4c2a;
    color:white;
    border:none;
    padding:8px;
    border-radius:6px;
    cursor:pointer;
}

#emergencia{
    margin-top:10px;
    font-weight:bold;
}

/* DICAS */
.tips-grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:10px;
}

.tip-card{
    perspective:1000px;
    height:90px;
}

.tip-inner{
    position:relative;
    width:100%;
    height:100%;
    transition:transform 0.6s;
    transform-style:preserve-3d;
    cursor:pointer;
}

.tip-card.flip .tip-inner{
    transform:rotateY(180deg);
}

.tip-front, .tip-back{
    position:absolute;
    width:100%;
    height:100%;
    backface-visibility:hidden;
    border-radius:10px;
    background:#3d2b1f;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:5px;
    text-align:center;
}

.tip-back{
    transform:rotateY(180deg);
    background:#6b4c2a;
}

/* FOTOS */
.gallery{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:10px;
}

.post{
    background:#f9f9f9;
    padding:8px;
    border-radius:10px;
}

.post img{
    width:100%;
    border-radius:8px;
    max-height:140px;
    object-fit:cover;
}

.like{
    color:red;
    cursor:pointer;
}

/* HIST√ìRIA */
.story{
    max-width:800px;
    margin:20px auto;
    background:white;
    padding:15px;
    border-radius:12px;
}

/* RESPONSIVO */
@media(max-width:768px){
    .container{
        flex-direction:column;
    }
}
</style>
</head>
<body>

<header>FINAN√áA ANIMAL</header>

<div class="user-bar">
    üë§ Seu nome:
    <input id="username" placeholder="Digite seu nome">
    <button onclick="saveUser()">Salvar</button>
</div>

<div class="container">

    <!-- CALCULADORA -->
    <div class="box">
        <h3>üí∞ Planejamento</h3>
        <input type="number" id="alimentacao" placeholder="Alimenta√ß√£o">
        <input type="number" id="saude" placeholder="Sa√∫de">
        <input type="number" id="mimos" placeholder="Mimos">
        <button onclick="calcular()">Analisar Gastos</button>
        <canvas id="grafico"></canvas>
        <div id="emergencia"></div>
    </div>

    <!-- DICAS -->
    <div class="box">
        <h3>üí° Dicas <button onclick="updateTips()">Atualizar</button></h3>
        <div class="tips-grid" id="tips"></div>
    </div>

    <!-- MOMENTO FOFURA -->
    <div class="box">
        <h3>üì∏ Momento Fofura</h3>
        <div class="gallery" id="gallery"></div>
    </div>
</div>

<!-- HIST√ìRIA -->
<div class="story">
    <h3>üìñ Hist√≥ria do seu Pet</h3>
    <input id="petname" placeholder="Nome do Pet">
    <textarea id="petstory" placeholder="Hist√≥ria"></textarea>
    <input type="file" id="petphoto">
    <button onclick="postStory()">Registrar</button>
</div>

<script>
let chart;

/* USU√ÅRIO */
function saveUser(){
    localStorage.setItem("user", username.value);
}
username.value = localStorage.getItem("user") || "";

/* CALCULADORA */
function calcular(){
    let a = +alimentacao.value || 0;
    let s = +saude.value || 0;
    let m = +mimos.value || 0;
    let total = a+s+m;

    let emergencia = total*0.2;
    document.getElementById("emergencia").innerText = "Emerg√™ncia: R$ "+emergencia.toFixed(2);

    if(chart) chart.destroy();
    chart = new Chart(grafico, {
        type:'pie',
        data:{
            labels:['Alimenta√ß√£o','Sa√∫de','Mimos'],
            datasets:[{data:[a,s,m]}]
        }
    });
}

/* DICAS */
const tipsList = [
"Vacinas em dia evitam gastos altos",
"Guarde 20% para emerg√™ncias",
"Passeios reduzem estresse",
"Ra√ß√£o boa evita veterin√°rio",
"Hidrata√ß√£o √© essencial",
"Brinquedos evitam ansiedade"
];

function updateTips(){
    let shuffled = tipsList.sort(()=>0.5-Math.random()).slice(0,4);
    tips.innerHTML="";
    shuffled.forEach(t=>{
        tips.innerHTML+=`
        <div class="tip-card" onclick="this.classList.toggle('flip')">
            <div class="tip-inner">
                <div class="tip-front">Dica</div>
                <div class="tip-back">${t}</div>
            </div>
        </div>`;
    });
}
updateTips();

/* GALERIA */
let badWords = ["idiota","burro","feio"];

function postStory(){
    let user = localStorage.getItem("user") || "An√¥nimo";
    let name = petname.value;
    let story = petstory.value;

    for(let w of badWords){
        if(story.toLowerCase().includes(w)){
            alert("Coment√°rio bloqueado!");
            return;
        }
    }

    let file = petphoto.files[0];
    let reader = new FileReader();
    reader.onload = e=>{
        gallery.innerHTML+=`
        <div class="post">
            <img src="${e.target.result}">
            <div><span class="like" onclick="like(this)">‚ù§Ô∏è</span> 0</div>
            <input placeholder="Comentar..." onblur="comment(this)">
        </div>`;
    };
    if(file) reader.readAsDataURL(file);
}

function like(el){
    el.nextSibling.textContent = parseInt(el.nextSibling.textContent)+1;
}

function comment(el){
    for(let w of badWords){
        if(el.value.toLowerCase().includes(w)){
            alert("Coment√°rio ofensivo bloqueado!");
            el.value="";
        }
    }
}
</script>

</body>
</html>
