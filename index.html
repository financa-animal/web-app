<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FinanÃ§a Animal</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  font-family: Arial, sans-serif;
  margin:0;
  background:
    linear-gradient(rgba(0,0,0,.45), rgba(0,0,0,.45)),
    url("https://images.unsplash.com/photo-1517423440428-a5a00ad493e8?auto=format&fit=crop&w=1600&q=80");
  background-size:cover;
  background-position:center;
  background-attachment:fixed;
}

header{
  background:#3b2a22;
  color:white;
  text-align:center;
  padding:10px;
  font-weight:bold;
}

.container{
  width:95%;
  max-width:650px;
  margin:20px auto;
}

.card{
  background:white;
  padding:15px;
  border-radius:10px;
  margin-bottom:20px;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}

input, textarea{
  width:100%;
  padding:8px;
  margin:5px 0;
  border-radius:5px;
  border:1px solid #ccc;
}

button{
  background:#5a3e36;
  color:white;
  border:none;
  padding:10px;
  width:100%;
  border-radius:5px;
  margin-top:5px;
  cursor:pointer;
}

img, video{
  width:100%;
  border-radius:8px;
  margin-top:10px;
}

.actions{
  display:flex;
  justify-content:space-between;
  margin-top:10px;
}

.comment{
  background:#eee;
  padding:5px;
  border-radius:5px;
  margin-top:5px;
}
</style>
</head>
<body>

<header>ğŸ¾ FinanÃ§a Animal</header>
<div class="container">

<!-- CALCULADORA -->
<div class="card">
  <h3>ğŸ’° Controle de Gastos</h3>
  <input type="number" id="food" placeholder="RaÃ§Ã£o">
  <input type="number" id="vet" placeholder="VeterinÃ¡rio">
  <input type="number" id="other" placeholder="Outros">
  <button onclick="calc()">Calcular</button>
  <canvas id="chart"></canvas>
</div>

<!-- DICAS -->
<div class="card">
  <h3>ğŸ“š Dicas</h3>
  <button onclick="newTips()">Atualizar Dicas</button>
  <div id="tips"></div>
</div>

<!-- HISTÃ“RIAS -->
<div class="card">
  <h3>ğŸ“– HistÃ³ria do seu Pet</h3>
  <input type="text" id="petName" placeholder="Nome do Pet">
  <textarea id="storyText" placeholder="Conte a histÃ³ria"></textarea>
  <input type="file" id="imageInput">
  <button onclick="addStory()">Publicar</button>
</div>
<div id="stories"></div>

<!-- FOFURA -->
<div class="card">
  <h3>ğŸ¶ Momento Fofura</h3>
  <input type="file" id="cuteImg">
  <button onclick="addCute()">Postar Foto Fofa</button>
</div>
<div id="cuteArea"></div>

<!-- VÃDEOS -->
<div class="card">
  <h3>ğŸ¥ VÃ­deos EngraÃ§ados</h3>
  <input type="file" id="videoInput" accept="video/*">
  <button onclick="addVideo()">Postar VÃ­deo</button>
</div>
<div id="videos"></div>

</div>

<script>
/* ---------- CALCULADORA + GRÃFICO ---------- */
function calc(){
  const food=+food.value||0;
  const vet=+vet.value||0;
  const other=+other.value||0;

  new Chart(chart,{
    type:"pie",
    data:{
      labels:["RaÃ§Ã£o","VeterinÃ¡rio","Outros"],
      datasets:[{data:[food,vet,other]}]
    }
  });
}

/* ---------- DICAS ---------- */
const tipsList=[
"ğŸ¾ Leve ao veterinÃ¡rio regularmente",
"ğŸ’§ Ãgua fresca sempre",
"ğŸ¥© AlimentaÃ§Ã£o adequada",
"ğŸ¾ Brincar Ã© saÃºde",
"ğŸ› Banho com produtos certos"
];
function newTips(){
  tips.innerHTML="";
  tipsList.sort(()=>0.5-Math.random()).slice(0,3).forEach(t=>{
    tips.innerHTML+=`<p>â€¢ ${t}</p>`;
  });
}

/* ---------- HISTÃ“RIAS ---------- */
let stories=JSON.parse(localStorage.getItem("stories"))||[];
function saveStories(){localStorage.setItem("stories",JSON.stringify(stories));}
function addStory(){
  const reader=new FileReader();
  const file=imageInput.files[0];
  reader.onload=()=>{
    stories.push({id:Date.now(),name:petName.value,text:storyText.value,img:reader.result,likes:0,comments:[]});
    saveStories(); renderStories();
  }
  file?reader.readAsDataURL(file):reader.onload();
}
function renderStories(){
  storiesDiv.innerHTML="";
}
const storiesDiv=document.getElementById("stories");
function renderStories(){
  storiesDiv.innerHTML="";
  stories.forEach(s=>{
    storiesDiv.innerHTML+=`
    <div class="card">
      <h4>${s.name}</h4><p>${s.text}</p>
      ${s.img?`<img src="${s.img}">`:""}
      <div class="actions">
        <button onclick="likeStory(${s.id})">â¤ï¸ ${s.likes}</button>
        <button onclick="editStory(${s.id})">âœï¸</button>
        <button onclick="deleteStory(${s.id})">ğŸ—‘ï¸</button>
      </div>
      <input id="c${s.id}" placeholder="Comentar">
      <button onclick="comment(${s.id})">Comentar</button>
      ${s.comments.map(c=>`<div class="comment">${c}</div>`).join("")}
    </div>`;
  });
}
function likeStory(id){stories.find(s=>s.id==id).likes++;saveStories();renderStories();}
function deleteStory(id){stories=stories.filter(s=>s.id!=id);saveStories();renderStories();}
function editStory(id){let s=stories.find(s=>s.id==id);let t=prompt("Editar:",s.text);if(t){s.text=t;saveStories();renderStories();}}
function comment(id){let i=document.getElementById("c"+id);stories.find(s=>s.id==id).comments.push(i.value);i.value="";saveStories();renderStories();}
renderStories();

/* ---------- FOFURA ---------- */
let cute=JSON.parse(localStorage.getItem("cute"))||[];
function addCute(){
  const reader=new FileReader();
  reader.onload=()=>{cute.push({img:reader.result,likes:0});localStorage.setItem("cute",JSON.stringify(cute));renderCute();}
  reader.readAsDataURL(cuteImg.files[0]);
}
function renderCute(){
  cuteArea.innerHTML="";
  cute.forEach((c,i)=>{
    cuteArea.innerHTML+=`<div class="card"><img src="${c.img}"><button onclick="likeCute(${i})">â¤ï¸ ${c.likes}</button></div>`;
  });
}
function likeCute(i){cute[i].likes++;localStorage.setItem("cute",JSON.stringify(cute));renderCute();}
renderCute();

/* ---------- VÃDEOS ---------- */
let vids=JSON.parse(localStorage.getItem("vids"))||[];
function addVideo(){
  const reader=new FileReader();
  reader.onload=()=>{vids.push(reader.result);localStorage.setItem("vids",JSON.stringify(vids));renderVids();}
  reader.readAsDataURL(videoInput.files[0]);
}
function renderVids(){
  videos.innerHTML="";
  vids.forEach(v=>{videos.innerHTML+=`<div class="card"><video controls src="${v}"></video></div>`});
}
renderVids();

</script>
</body>
</html>
