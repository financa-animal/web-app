<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêæ Finan√ßa Animal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{margin:0;font-family:Arial;background:url("https://images.unsplash.com/photo-1518717758536-85ae29035b6d") center/cover fixed;}
header{background:#4b2e1e;color:white;text-align:center;padding:15px;font-size:22px;}
.card{background:white;margin:15px auto;padding:15px;border-radius:12px;width:95%;max-width:520px;box-shadow:0 4px 12px rgba(0,0,0,0.2);}
input,textarea,button{width:100%;padding:8px;margin:6px 0;border-radius:6px;border:1px solid #ccc;}
button{background:#5a3d2b;color:white;cursor:pointer}
.alerta{font-weight:bold;margin-top:10px}

/* DICAS */
.dicas{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.flip{perspective:1000px;cursor:pointer}
.flip-inner{position:relative;width:100%;height:100px;transition:transform .6s;transform-style:preserve-3d;}
.flip.active .flip-inner{transform:rotateY(180deg);}
.frente,.verso{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:10px;display:flex;justify-content:center;align-items:center;padding:10px;font-weight:bold;text-align:center;}
.frente{background:#5a3d2b;color:white;}
.verso{background:#f1c40f;transform:rotateY(180deg);}

/* POSTS */
.post{background:#fff;padding:8px;border-radius:10px;margin-bottom:10px}
.post img{width:100%;border-radius:8px}
.actions{display:flex;gap:5px;margin-top:5px;align-items:center}
.like{color:red;cursor:pointer}
.comment{margin-top:5px;background:#f2f2f2;padding:5px;border-radius:5px;font-size:13px}
</style>
</head>

<body>

<header>üêæ Finan√ßa Animal</header>

<!-- CALCULADORA -->
<div class="card">
<h3>üí∞ Planejamento do Pet</h3>
<input type="number" id="a" placeholder="Alimenta√ß√£o">
<input type="number" id="s" placeholder="Sa√∫de">
<input type="number" id="m" placeholder="Mimos">
<button onclick="calc()">Analisar Gastos</button>
<canvas id="graf"></canvas>
<div id="msg" class="alerta"></div>
</div>

<!-- DICAS -->
<div class="card">
<h3>üß† Dicas <button onclick="gerarDicas()">Atualizar Dicas</button></h3>
<div class="dicas" id="dicas"></div>
</div>

<!-- POSTAR -->
<div class="card">
<h3>üìñ Hist√≥ria do seu Pet</h3>
<input id="nomePet" placeholder="Nome do Pet">
<textarea id="historia" placeholder="Conte a hist√≥ria"></textarea>
<input type="file" id="foto">
<button onclick="salvarPost()">Publicar</button>
</div>

<!-- FEED -->
<div class="card">
<h3>üì∏ Momento Fofura</h3>
<div id="feed"></div>
</div>

<script>
/* CALCULADORA */
let chart;
function calc(){
 let a = Number(document.getElementById("a").value)||0;
 let s = Number(document.getElementById("s").value)||0;
 let m = Number(document.getElementById("m").value)||0;
 let total = a+s+m;

 if(chart) chart.destroy();
 chart = new Chart(document.getElementById("graf"),{
  type:'doughnut',
  data:{labels:['Alimenta√ß√£o','Sa√∫de','Mimos'],datasets:[{data:[a,s,m]}]}
 });

 let msg="";
 if(total>800) msg="üö® Alerta! Gastos muito altos.";
 else if(m>a) msg="‚ö†Ô∏è Muitos mimos.";
 else if(s>a) msg="‚ö†Ô∏è Sa√∫de pesando no or√ßamento.";
 else msg="‚úÖ Gastos equilibrados!";
 document.getElementById("msg").innerText=msg;
}

/* DICAS DIN√ÇMICAS */
const lista=[
"Vacinas evitam gastos grandes",
"Ra√ß√£o boa reduz veterin√°rio",
"Escovar dentes evita cirurgia",
"Passeio mant√©m sa√∫de",
"√Ågua fresca sempre",
"Check-up anual √© essencial"
];

function gerarDicas(){
 dicas.innerHTML="";
 let sorteadas = lista.sort(()=>0.5-Math.random()).slice(0,4);
 sorteadas.forEach(t=>{
  dicas.innerHTML+=`
  <div class="flip" onclick="this.classList.toggle('active')">
   <div class="flip-inner">
    <div class="frente">üêæ Dica</div>
    <div class="verso">${t}</div>
   </div>
  </div>`;
 });
}
gerarDicas();

/* POSTS */
let posts=JSON.parse(localStorage.getItem("posts"))||[];

function salvarPost(){
 let file=foto.files[0];
 let reader=new FileReader();
 reader.onload=e=>{
  posts.push({
   nome:nomePet.value,
   texto:historia.value,
   img:e.target.result,
   likes:0,
   comentarios:[]
  });
  localStorage.setItem("posts",JSON.stringify(posts));
  renderPosts();
 };
 if(file) reader.readAsDataURL(file);
}

function renderPosts(){
 feed.innerHTML="";
 posts.forEach((p,i)=>{
  let comentariosHTML="";
  p.comentarios.forEach(c=>{
    comentariosHTML+=`<div class="comment">${c}</div>`;
  });

  feed.innerHTML+=`
  <div class="post">
   <h4>${p.nome}</h4>
   <p>${p.texto}</p>
   <img src="${p.img}">
   <div class="actions">
    <span class="like" onclick="curtir(${i})">‚ù§Ô∏è ${p.likes}</span>
    <button onclick="excluir(${i})">üóë</button>
   </div>
   <input placeholder="Comentar..." onkeydown="if(event.key==='Enter') comentar(${i},this)">
   ${comentariosHTML}
  </div>`;
 });
}
renderPosts();

function curtir(i){
 posts[i].likes++;
 localStorage.setItem("posts",JSON.stringify(posts));
 renderPosts();
}

function comentar(i,input){
 posts[i].comentarios.push(input.value);
 localStorage.setItem("posts",JSON.stringify(posts));
 renderPosts();
}

function excluir(i){
 if(confirm("Excluir post?")){
  posts.splice(i,1);
  localStorage.setItem("posts",JSON.stringify(posts));
  renderPosts();
 }
}
</script>

</body>
</html>
