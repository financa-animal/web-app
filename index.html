<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finan√ßa Animal | Mural</title>
<style>
:root { --gold:#c68642; --brown:#3e2723; --bg:#fdfbf7; }
body { font-family:Segoe UI; background:var(--bg); margin:0; }

header { background:var(--brown); color:white; padding:20px; text-align:center; font-size:24px; }

.mural-input { max-width:600px; margin:20px auto; background:white; padding:20px; border-radius:12px; box-shadow:0 5px 20px rgba(0,0,0,0.08);}
input, textarea { width:100%; padding:10px; margin-bottom:10px; border:1px solid #eee; border-radius:6px;}
button { background:var(--gold); color:white; border:none; padding:10px; border-radius:6px; cursor:pointer; font-weight:bold; }
button:hover { background:var(--brown); }

.filtros { text-align:center; margin:10px; }
.filtros button { width:auto; margin:5px; padding:6px 12px; font-size:12px; }

.mural-grid { max-width:900px; margin:20px auto; display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:20px; }

.post { background:white; border-radius:12px; box-shadow:0 5px 20px rgba(0,0,0,0.08); overflow:hidden; }
.post img, .post iframe { width:100%; height:220px; object-fit:cover; }
.post-body { padding:10px 15px; text-align:left; }
.post strong { display:block; color:var(--brown); }
.post p { font-size:0.85rem; }

.actions { display:flex; justify-content:space-between; margin-top:8px; }
.actions button { background:none; color:var(--brown); padding:4px 8px; font-size:12px; }

.comentarios { margin-top:8px; font-size:0.75rem; max-height:70px; overflow:auto; }
.comentarios div { background:#f5f5f5; padding:4px; border-radius:4px; margin-top:4px; }

.delete { position:absolute; right:10px; top:10px; background:#d32f2f; border-radius:50%; width:24px; height:24px; }
</style>
</head>
<body>

<header>üêæ FINAN√áA ANIMAL ‚Äî Mural Fofura</header>

<div class="mural-input">
    <input type="text" id="nomePet" placeholder="Nome do Pet">
    <textarea id="relato" placeholder="Conte a hist√≥ria..."></textarea>
    <input type="file" id="fotoPet" accept="image/*">
    <input type="text" id="linkVideo" placeholder="Ou link de v√≠deo (YouTube)">
    <button onclick="salvarPost()">PUBLICAR</button>
</div>

<div class="filtros">
    <button onclick="filtrar('todos')">Todos</button>
    <button onclick="filtrar('imagem')">Fotos</button>
    <button onclick="filtrar('video')">V√≠deos</button>
</div>

<div class="mural-grid" id="muralGrid"></div>

<script>
let posts = JSON.parse(localStorage.getItem("postsPets")) || [];

function salvarStorage(){ localStorage.setItem("postsPets", JSON.stringify(posts)); }

function converterParaEmbed(link){
    if(link.includes("watch?v=")){
        return "https://www.youtube.com/embed/" + link.split("v=")[1].split("&")[0];
    }
    return link;
}

function salvarPost(){
    const nome = nomePet.value;
    const relato = relatoPet = relato.value;
    const file = fotoPet.files[0];
    const video = linkVideo.value;

    if(!nome || !relato) return alert("Preencha tudo!");

    if(video){
        posts.push({id:Date.now(),tipo:"video",src:converterParaEmbed(video),nome,relato,likes:0,comentarios:[]});
        finalizar();
        return;
    }

    if(file){
        const reader = new FileReader();
        reader.onload = e=>{
            posts.push({id:Date.now(),tipo:"imagem",src:e.target.result,nome,relato,likes:0,comentarios:[]});
            finalizar();
        }
        reader.readAsDataURL(file);
    }
}

function finalizar(){
    salvarStorage();
    renderizar(posts);
    nomePet.value=""; relato.value=""; fotoPet.value=""; linkVideo.value="";
}

function renderizar(lista){
    muralGrid.innerHTML="";
    lista.slice().reverse().forEach(p=>{
        const div=document.createElement("div");
        div.className="post";
        div.innerHTML=`
            ${p.tipo=="imagem" ? `<img src="${p.src}">` : `<iframe src="${p.src}" frameborder="0" allowfullscreen></iframe>`}
            <div class="post-body">
                <strong>${p.nome}</strong>
                <p>${p.relato}</p>
                <div class="actions">
                    <button onclick="curtir(${p.id})">‚ù§Ô∏è ${p.likes}</button>
                    <button onclick="comentar(${p.id})">üí¨</button>
                    <button onclick="apagar(${p.id})">üóëÔ∏è</button>
                </div>
                <div class="comentarios">${p.comentarios.map(c=>`<div>${c}</div>`).join("")}</div>
            </div>`;
        muralGrid.appendChild(div);
    });
}

function curtir(id){ posts.find(p=>p.id==id).likes++; salvarStorage(); renderizar(posts); }

function comentar(id){
    const txt=prompt("Coment√°rio:");
    if(txt){ posts.find(p=>p.id==id).comentarios.push(txt); salvarStorage(); renderizar(posts); }
}

function apagar(id){
    if(confirm("Apagar post?")){
        posts=posts.filter(p=>p.id!=id);
        salvarStorage();
        renderizar(posts);
    }
}

function filtrar(tipo){
    if(tipo=="todos") return renderizar(posts);
    renderizar(posts.filter(p=>p.tipo==tipo));
}

renderizar(posts);
</script>

</body>
</html>
